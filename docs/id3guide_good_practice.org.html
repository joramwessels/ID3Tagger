<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0023)http://id3.org/id3guide -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="robots" content="index,nofollow">

<title>id3guide - ID3.org</title>
<script type="text/javascript" src="./id3guide_good_practice.org_files/common.js"></script><style type="text/css"></style>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./id3guide_good_practice.org_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="./id3guide_good_practice.org_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="./id3guide_good_practice.org_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="./id3guide_good_practice.org_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static193/moniker/css/msie.css">
<![endif]-->




<script type="text/javascript" src="./id3guide_good_practice.org_files/actionmenuoptions.js"></script>

<link rel="Start" href="http://id3.org/Home">
<link rel="Alternate" title="Wiki Markup" href="http://id3.org/id3guide?action=raw">
<link rel="Alternate" media="print" title="Print View" href="http://id3.org/id3guide?action=print">
<link rel="Search" href="http://id3.org/FindPage">
<link rel="Index" href="http://id3.org/TitleIndex">
<link rel="Glossary" href="http://id3.org/WordIndex">
<link rel="Help" href="http://id3.org/HelpOnFormatting">
</head>

<body lang="en" dir="ltr">
<center><script type="text/javascript"><!--
google_ad_client = "pub-1408728402565238";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "DD6600";
google_color_text = "000000";
google_color_url = "DD6600";
//--></script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
  </script>
</center>
<div id="username">welcome: <a href="http://id3.org/id3guide?action=login" id="login" rel="nofollow">please sign in</a></div>
<div id="header"><div id="logo"><a href="http://id3.org/Home"><img src="./id3guide_good_practice.org_files/id3v2.gif" alt="ID3.org Logo">&nbsp;&nbsp;The Audience is informed</a></div></div>
<div id="sidebar">
<div class="sidepanel"><h1>Quick Links</h1>
		<ul id="navibar">
		<li class="wikilink"><a href="http://id3.org/Home">Home</a></li><li class="wikilink"><a href="http://id3.org/Introduction">Introduction</a></li><li class="wikilink"><a href="http://id3.org/Developer%20Information">Developer Information</a></li><li class="wikilink"><a href="http://id3.org/Implementations">Implementations</a></li><li class="wikilink"><a href="http://id3.org/Compliance%20Issues">Compliance Issues</a></li><li class="wikilink"><a href="http://id3.org/Contributors">Contributors</a></li><li class="wikilink"><a href="http://id3.org/FAQ">FAQ</a></li><li class="wikilink"><a href="http://id3.org/MailingList">MailingList</a></li><li class="wikilink"><a href="http://id3.org/RecentChanges">RecentChanges</a></li><li class="wikilink"><a href="http://id3.org/FindPage">FindPage</a></li><li class="wikilink"><a href="http://id3.org/HelpContents">HelpContents</a></li>
		</ul>
</div>
<div class="sidepanel"><h1>Search Wiki</h1>
<form id="searchform" method="get" action="./id3guide_good_practice.org_files/id3guide_good_practice.org.html">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">

<input id="searchinput" type="text" name="value" value="" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="this" class="disabled">
    <div id="searchbuttons">
    <input id="titlesearch" name="titlesearch" type="submit" value="Titles" alt="Search Titles" disabled="">
<input id="fullsearch" name="fullsearch" type="submit" value="Text" alt="Search Full Text" disabled="">
</div>
</div>
</form>
<script type="text/javascript">
// Initialize search form
// var f = document.getElementById('searchform');
// f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
e.value = "";
searchChange(e);
searchBlur(e);
</script>
</div>

<div class="sidepanel"><h1>Page Tools</h1><ul class="editbar"><li><span class="disabled">Page Locked</span></li><li class="toggleCommentsButton" style="display:none;"><a href="http://id3.org/id3guide#" class="nbcomment" onclick="toggleComments();return false;">Comments</a></li><li><a href="http://id3.org/id3guide?action=info" rel="nofollow">page history</a></li><li><a href="http://id3.org/id3guide?action=AttachFile" rel="nofollow">upload &amp; manage files</a></li><li>
<div class="togglelink" id="togglelink" onclick="toggleMenu(&#39;menu1&#39;)">[ more options ]</div>
<div id="menu1">
<ul>
<li><a href="http://id3.org/id3guide?action=raw">Raw Text</a></li>
<li><a href="http://id3.org/id3guide?action=print">Print View</a></li>
<li><a href="http://id3.org/id3guide?action=refresh">Delete Cache</a></li>
<li><a href="http://id3.org/id3guide?action=SpellCheck">Check Spelling</a></li>
<li><a href="http://id3.org/id3guide?action=LikePages">Like Pages</a></li>
<li><a href="http://id3.org/id3guide?action=LocalSiteMap">Local Site Map</a></li>
<li class="disabled">Rename Page</li>
<li class="disabled">Delete Page</li>
<li class="disabled">Subscribe User</li>
<li class="disabled">Remove Spam</li>
<li class="disabled">revert to this revision</li>
<li class="disabled">Package Pages</li>
<li><a href="http://id3.org/id3guide?action=SyncPages">Sync Pages</a></li>
<li class="disabled"></li>
<li><a href="http://id3.org/id3guide?action=Load">Load</a></li>
<li><a href="http://id3.org/id3guide?action=Save">Save</a></li>
<li><a href="http://id3.org/id3guide?action=SlideShow">SlideShow</a></li>
</ul>
</div>
</li></ul>
</div>
</div>


<div id="page" lang="en" dir="ltr">

<span id="pagelocation">location: <a class="backlink" href="./id3guide_good_practice.org_files/id3guide_good_practice.org.html" rel="nofollow">id3guide</a></span><div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line874">Applies to: ID3v2.3 Table of Contents <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="http://id3.org/id3guide#Introduction">Introduction</a><ol><li>
<a href="http://id3.org/id3guide#Use_of_this_document">Use of this document</a></li></ol></li><li>
<a href="http://id3.org/id3guide#What.27s_new_in_ID3v2.3.3F">What's new in ID3v2.3?</a><ol><li>
<a href="http://id3.org/id3guide#Structural_changes:">Structural changes:</a></li><li>
<a href="http://id3.org/id3guide#Clarifications:">Clarifications:</a></li><li>
<a href="http://id3.org/id3guide#New_frames:">New frames:</a></li><li>
<a href="http://id3.org/id3guide#Deleted_frames:">Deleted frames:</a></li></ol></li><li>
<a href="http://id3.org/id3guide#Programming_Considerations">Programming Considerations</a><ol><li>
<a href="http://id3.org/id3guide#Padding">Padding</a></li></ol></li><li>
<a href="http://id3.org/id3guide#Pitfalls_.26_General_Advice">Pitfalls &amp; General Advice</a><ol><li>
<a href="http://id3.org/id3guide#RTFM_.28details_are_important.21.29">RTFM (details are important!)</a></li><li>
<a href="http://id3.org/id3guide#Compression_before_encryption">Compression before encryption</a></li><li>
<a href="http://id3.org/id3guide#Validating_user_input">Validating user input</a></li></ol></li><li>
<a href="http://id3.org/id3guide#Credits_.26_Contributors">Credits &amp; Contributors</a></li><li>
<a href="http://id3.org/id3guide#References">References</a></li><li>
<a href="http://id3.org/id3guide#Copyright_.26_Legal_Notice">Copyright &amp; Legal Notice</a></li></ol></div> <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
</p><h2 id="Introduction">Introduction</h2>
<span class="anchor" id="line-6"></span><p class="line874">There are many people who enjoy .MP3 compressed music. The MP3 specification only defined the storage of musical data and did not provide the storage of metadata related to the musical composition; e.g., title, composer and artist, publisher, etc. The ID3 tag standard was created to remedy this need... <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span></p><p class="line867"><strong>Rationale</strong>: Specifications are like grammar: they provide the rules of formatting data but few clues as to how to speak concisely and efficiently. The goal of this document is to answer the "Should I do..." and "Would doing X make it easier/faster/smaller..." type questions. <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span></p><p class="line867"><strong>Audience</strong>: This document is geared toward programmers dealing directly with ID3v2.3 tags. There is a heavy slant towards writing tags correctly since decoding is relatively straightforward. You should familiarize yourself with the ID3v2 and related standards since this document refers to and uses the terminology from those documents. <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></p><p class="line867"><strong>Coverage</strong>: Although ID3v2 tags were created for use with MPEG Layer-3 audio streams, flexibility was a goal from the start. Even though much of this document refers to .MP3 files, the principles are generally applicable to other formats. <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span></p><p class="line867">
</p><h3 id="Use_of_this_document">Use of this document</h3>
<span class="anchor" id="line-15"></span><p class="line874">These are merely Guidelines and as such they are not part of the ID3v2 standard. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span></p><ol type="1"><li>If anything in this document contradicts the published ID3v2 standard, then the standard shall prevail. The ID3v2 standard always has the final word. <span class="anchor" id="line-18"></span></li><li>These Guidelines are not binding on anyone (whereas the standard is binding, for obvious reasons.) This means you, as a programmer, should never assume anyone else will abide by these guidelines. A protocol designer once said: <span class="anchor" id="line-19"></span><ul><li style="list-style-type:none"><p class="line862">"<em>Be flexible in what you accept, but strict in what you write.</em>" <span class="anchor" id="line-20"></span></p></li></ul></li><li>Use your judgement and common sense. <span class="anchor" id="line-21"></span></li></ol><p class="line867">
</p><h2 id="What.27s_new_in_ID3v2.3.3F">What's new in ID3v2.3?</h2>
<span class="anchor" id="line-22"></span><p class="line874">For starters, the naming convention changed. "ID3v2" now refers to the family of frame-based tagging methods which utilize the 10-byte header beginning with "ID3" followed by version information. "ID3v2.3.0" refers to the informal standard dated September 1998. The informal standard formerly known as "ID3v2" has been renamed to "ID3v2.2" <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span></p><p class="line874">This document concentrates on ID3v2.3. The previous standard, ID3v2.2, is now obsolete. <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span></p><p class="line862">A summary of the differences between ID3v2.3.0 and v2.2 is listed below. Section numbers match the <a href="http://id3.org/id3v2.3.0">ID3v2.3.0 Informal Standard</a>. <span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span></p><p class="line867">
</p><h3 id="Structural_changes:">Structural changes:</h3>
<span class="anchor" id="line-29"></span><ul><li>The Frame Header has been expanded. The Frame ID and Frame Size fields are now four bytes long. Two bytes of Flags have been added. See §3.3. <span class="anchor" id="line-30"></span></li><li>An optional Extended Header can follow the ID3v2 tag header §3.2. Among other things, the extended header can store a CRC of the entire tag. <span class="anchor" id="line-31"></span></li></ul><p class="line867">
</p><h3 id="Clarifications:">Clarifications:</h3>
<span class="anchor" id="line-32"></span><ul><li>Pre-defined Frame IDs have been renamed to four characters long. <span class="anchor" id="line-33"></span></li><li>Unicode strings are now required to start with the Byte Order Mark (BOM) character. See §3.3. <span class="anchor" id="line-34"></span></li><li>Compression and encryption are done on a frame-by-frame basis. The compression algorithm are those offered in zlib. §3.3 <span class="anchor" id="line-35"></span></li><li>Attached Picture [APIC] frame: the Image Format field has been replaced MIME Type §4.15. <span class="anchor" id="line-36"></span></li></ul><p class="line867">
</p><h3 id="New_frames:">New frames:</h3>
<span class="anchor" id="line-37"></span><ul><li>Position Synchronization frame [POSS] §4.22 <span class="anchor" id="line-38"></span></li><li>Terms of Use frame [USER] §4.23 <span class="anchor" id="line-39"></span></li><li>Ownership frame [OWNE] §4.24 <span class="anchor" id="line-40"></span></li><li>Commercial frame [COMR] §4.25 <span class="anchor" id="line-41"></span></li><li>Private frame [PRIV] §4.28 <span class="anchor" id="line-42"></span></li><li>Encryption Method Registration [ENCR] §4.25 <span class="anchor" id="line-43"></span></li><li>Group ID Registration [GRID] §4.26.Used in conjunction with new frame features described in §3.3 <span class="anchor" id="line-44"></span></li><li>Text frames: Internet Radio Station Name [TRSN] and Internet Radio Station Owner [TRSO] <span class="anchor" id="line-45"></span></li><li>URL link frames: Official internet radio station homepage [WORS] and Payment [WPAY] <span class="anchor" id="line-46"></span></li></ul><p class="line867">
</p><h3 id="Deleted_frames:">Deleted frames:</h3>
<span class="anchor" id="line-47"></span><ul><li>Encrypted meta-frame. <span class="anchor" id="line-48"></span></li></ul><p class="line867">
</p><h2 id="Programming_Considerations">Programming Considerations</h2>
<span class="anchor" id="line-49"></span><p class="line867">
</p><h3 id="Padding">Padding</h3>
<span class="anchor" id="line-50"></span><p class="line874">The use of padding and how much should be used has been a matter of debate ever since the first draft of ID3v2. (Take a look in the mailing list archives for arguments.) <span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span></p><p class="line874">Before making recommendations let's quantify the issue: <span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span></p><ul><li>A two minute song compressed at 44Khz and 128Kb/sec takes about 1990K (slightly less than 2MB) of disk space. The average size of .MP3 files in my collection is 3.5MB <span class="anchor" id="line-55"></span></li><li>ID3v1 and Lyrics3 tags are only 128 bytes and 3K, respectively - and they served most songs just fine. <span class="anchor" id="line-56"></span></li><li>An ID3v2 tag with basic information (title, artist/composer, copyright) is typically less than 1K in size. Toss in publisher information and lyrics and it comes out to 3K or so. <span class="anchor" id="line-57"></span></li><li>Adding a 3K tag to a 2MB song will increase its size by 0.15% <span class="anchor" id="line-58"></span></li><li>Adding a 10K tag to a 2MB song increases its size by 0.5% <span class="anchor" id="line-59"></span></li><li>Suppose a CD-ROM holds 160 songs. Tagging all of them with 3K tags requires less than a megabyte. <span class="anchor" id="line-60"></span></li></ul><p class="line874">So in reality tags are tiny compared to the amount of audio data accompanying it. A few KB of padding will not increase the file size noticeably. Remember also the padding is required to be 0's, which means on a slow modem link the padding is compressed significantly. <span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span></p><p class="line874">There is but one reason to use padding: since ID3v2 tags are stored at the beginning of the file, it would be a major pain to rewrite the entire multi-megabyte file to add a 50-byte frame. Padding reserves space in advance. <span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span></p><p class="line874">The issue then is how much padding should be used. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span></p><p class="line867"><strong>James's</strong> recommendations: <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span></p><ul><li>What do most people care about? Probably title, artist, composer, band, publisher, lyrics and copyright. 4K will usually be enough for all that plus some miscellaneous information such as media type, file size, playcounter, time codes, etc. <span class="anchor" id="line-69"></span></li><li>If you are editing an existing tag and run out of room (meaning you must rewrite the entire file) then double the amount of space reserved for the tag. For example, a file has a 4K tag filled with 3K of data. User wants to add 2K of data, so you rewrite the file reserving 8K at the beginning; then save the 5K of data and leaving 3K of padding. <span class="anchor" id="line-70"></span><ul><li style="list-style-type:none">Obviously there should be an upper bound on doubling; a reasonable number would be 16K or 32K. For example, a file has a 25K tag but only 4K of padding left and the user wants to add 7K of new data. Rewrite the file and reserve 41K: save 28K of tag data and leave 13K of padding. <span class="anchor" id="line-71"></span></li></ul></li><li>Pictures are large and vary in size. If there are pictures then you should add more padding; use your judgement here. <span class="anchor" id="line-72"></span></li><li>Do not forgo padding in files destined for read-only media or streaming applications. The user may want to save the file to another location and edit the tag. <span class="anchor" id="line-73"></span></li><li>Include an option to let the user disable padding if (s)he really wants to. <span class="anchor" id="line-74"></span></li></ul><p class="line867"><strong>Martin </strong>has a good idea: Add enough padding to round out the file to a full cluster. Obviously a minimum amount of padding has to be added to be useful, but beyond the minimum, everything up to the next cluster size will not occupy additional disk space. (Each operating system has its own terminology; Microsoft uses cluster, Apple uses allocation block. How files are stored on disk is beyond the scope of this document; consult an OS book and API reference for details.) <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span></p><p class="line874">Here are some common cluster sizes: <span class="anchor" id="line-77"></span></p><div><table><tbody><tr>  <td colspan="1" rowspan="2" style="text-align: center;"><p class="line891"><strong>Operating system <br>
(file system type)</strong> </p></td>
  <td colspan="7" style="text-align: center;"><p class="line891"><strong>Disk size</strong> </p></td>
</tr>
<tr>  <td style="text-align: center;"><span class="anchor" id="line-78"></span><p class="line862"> &lt; 256MB </p></td>
  <td style="text-align: center;"><p class="line862"> up to 512MB </p></td>
  <td style="text-align: center;"><p class="line862"> up to 1GB </p></td>
  <td style="text-align: center;"><p class="line862"> up to 2GB </p></td>
  <td style="text-align: center;"><p class="line862"> up to 8GB </p></td>
  <td style="text-align: center;"><p class="line862"> up to 16GB </p></td>
  <td style="text-align: center;"><p class="line862"> &gt; 16GB </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-79"></span><p class="line862"> DOS &amp; Windows 95 <br>
 (FAT16) </p></td>
  <td style="text-align: center;"><p class="line862"> 4K </p></td>
  <td style="text-align: center;"><p class="line862"> 8K </p></td>
  <td style="text-align: center;"><p class="line862"> 16K </p></td>
  <td style="text-align: center;"><p class="line862"> 32K </p></td>
  <td colspan="3" style="text-align: center;"><p class="line862">N/A <br>
(FAT16 can't handle drives &gt; 4GB) </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-80"></span><p class="line862"> Win95 OSR2 &amp; Win98 <br>
 (FAT32) </p></td>
  <td style="text-align: center;"><p class="line862"> N/A </p></td>
  <td colspan="4" style="text-align: center;"><p class="line862"> 4K </p></td>
  <td style="text-align: center;"><p class="line862"> 8K </p></td>
  <td style="text-align: center;"><p class="line862"> 16K or 32K </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-81"></span><p class="line862"> Windows NT <br>
 (NTFS) </p></td>
  <td colspan="7" style="text-align: center;"><p class="line862">0.5K to 64K <br>
(0.5K to 4K clusters are most common) </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-82"></span><p class="line862"> MacOS pre-8.1 <br>
 (HFS) </p></td>
  <td style="text-align: center;"><p class="line862"> 0.5K - 4K </p></td>
  <td style="text-align: center;"><p class="line862"> 4.5K - 8K </p></td>
  <td style="text-align: center;"><p class="line862"> 8.5K - 16K </p></td>
  <td style="text-align: center;"><p class="line862"> 16.5K - 32K </p></td>
  <td colspan="3" style="text-align: center;"><p class="line862">N/A <br>
(HFS can't handle disks &gt; 2GB) </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-83"></span><p class="line862"> MacOS 8.1 and later <br>
 (HFS+) </p></td>
  <td style="text-align: center;"><p class="line862"> 0.5K </p></td>
  <td style="text-align: center;"><p class="line862"> 1K </p></td>
  <td style="text-align: center;"><p class="line862"> 2K </p></td>
  <td colspan="4" style="text-align: center;"><p class="line862"> Default is 4K; user-selectable up to 4K </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-84"></span><p class="line862"> CD-ROM, 650MB <br>
(ISO 9660) </p></td>
  <td colspan="7" style="text-align: center;"><p class="line862">always 2K </p></td>
</tr>
<tr>  <td><span class="anchor" id="line-85"></span><p class="line862"> DVD-ROM <br>
(UDF) </p></td>
  <td colspan="7" style="text-align: center;"><p class="line862">always 2K </p></td>
</tr>
</tbody></table></div><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><p class="line862">Advanced operating systems employ tricks to optimize disk space. For example, Novell NetWare 4 uses 64K disk blocks but can split a block into 0.5K pieces, thus creating the illusion of 512-byte blocks. UNIX file systems have their own methods to utilize disk space efficiently. <span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span></p><p class="line867"><strong>James's</strong> shortcut on choosing an appropriate cluster size: 2K (Nice even number, not too big, not too small) <span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span></p><p class="line867">
</p><h4 id="Read-only_media">Read-only media</h4>
<span class="anchor" id="line-93"></span><p class="line874">Never assume a .MP3 file is writable unless the user is specifically editing the tag. MP3 files can be stored on read-only media such as a CD-ROM or a network share. If the user is editing the tag, it is an error if the file is write-protected because the user's changes cannot be saved. If a player is merely updating the playcounter or popularity-meter, it should not pop up a message complaining the file cannot be written to. <span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span></p><p class="line867"><strong>James</strong>: Include a visual cue to indicate whether the file is write-protected. For example, a small icon similar in size and color to the stereo indicator in WinAMP. A quick glance will determine whether certain settings will be saved. <span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span></p><p class="line867">
</p><h4 id="A.22Insignificant.22_frames">"Insignificant" frames</h4>
<span class="anchor" id="line-98"></span><p class="line874">"Insignificant" frames are small frames that don't necessarily have meaning when a ID3v2 tag is created. The issue is whether the tag editor should add these frames when they do not already exist. <span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span></p><p class="line874">For example, if Joe is adding tags to a fresh batch of .MP3 files, should the tag editor include a playcounter [PCNT] frame in the tag? The tag editor has no idea how many times the particular file has been played; unless Joe tells it otherwise, the editor has to create a [PCNT] frame with a count of 0. <span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span></p><p class="line874">There are two ways to look at this. On the one hand, the frame is so small it takes almost no effort to include it. Since there will usually be a few hundred bytes of padding, the ten bytes used by the counter frame is in a sense "free." A player will probably add it later anyway when the file is used. <span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span></p><p class="line874">On the other hand, if the frame is not holding useful information, why bother adding it? Padding, if used, effectively reserves space for these frames. Consider also the absence of a frame can be meaningful: the lack of a playcounter frame may indicate "I do not know how many times this piece has been played" as opposed to a count of 0, which indicates "This song has never been played." <span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span></p><p class="line874">These can be considered "insignificant" frames: <span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span></p><ul><li>Playcounter [PCNT] <span class="anchor" id="line-109"></span><ul><li style="list-style-type:none"><p class="line862">(<strong>James</strong>: an integrated ripper-encoder-tagger can include a playcount of 0 in newly created files, since by definition they have never been used..) <span class="anchor" id="line-110"></span></p></li></ul></li><li>Others, anyone? <span class="anchor" id="line-111"></span></li></ul><p class="line867"><strong>Martin</strong>: It is considered good manner to allow the user to disable writing of frames (s)he doesn't want. At least in an advanced menu in a hidden place. Perhaps the user doesn't want the TSI, TLE, TMT and MLL frame to be added automatically, even though it might be the default setting. <span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></p><p class="line867">
</p><h4 id="Preferred_image_formats">Preferred image formats</h4>
<span class="anchor" id="line-114"></span><p class="line874">A question Martin gets often is why the ID3v2 document says "... PNG and JPEG picture format should be used..." Interoperability means it is almost guaranteed another ID3v2 tag/picture decoder can handle the PNG and JPEG formats. The chances a Macintosh application can display BMP files are slim; likewise, the complexities of EPS and TIFF are best left out. <span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span></p><p class="line874">Consider these other arguments favoring PNG and JPEG: <span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span></p><ul><li>PNG compresses better than BMP, GIF and most other lossless formats. <span class="anchor" id="line-119"></span></li><li>JPEG has superior compression to most formats, especially for photographic pictures. (JPEG is not suitable for line-art and computer-generated graphics - use PNG for these.) <span class="anchor" id="line-120"></span></li><li>Both formats are patent- and royalty-free (which is not the case with GIF, whose LZW compression algorithm is patented by Unisys.) <span class="anchor" id="line-121"></span></li></ul><p class="line867"><strong>Martin</strong>: The freedom to use whatever format you like in the picture frame is of course a freedom under responsibility. Do you want to make cross platform tags? Do you want to avoid legal trouble, at least for the principle? If so, use PNG and JPEG. <span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span></p><p class="line867"><strong>Dirk</strong>: Applications may want to convert the incoming picture type to PNG or JPEG first, or failing that, at least inform the user that they should be using PNG or JPEG, but allow the user to override this if they insist on using, say, a PCX. <span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span></p><p class="line867">
</p><h4 id="Multiple_tags">Multiple tags</h4>
<span class="anchor" id="line-126"></span><p class="line874">Decoders should be prepared to handle multiple ID3v2 tags per stream. This is especially important for players/decoders wanting to handle netradio-type applications since the notion of distinct files may not apply. <span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span></p><p class="line867"><strong>Dirk</strong>: An easy way to achieve this would be to use a central 'frame dispatch' routine, kind of like a demultiplexer. <span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span></p><p class="line867">
</p><h4 id="Unsynchronization">Unsynchronization</h4>
<span class="anchor" id="line-131"></span><p class="line862">The ID3v2 standard states "The only purpose of the 'unsychronisation scheme' is to make the ID3v2 tag as compatible as possible with existing software <em>[at the time the ID3v2.2 standard was drafted]</em>" What are the implications? <span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span></p><ol type="1"><li>MP3 decoders, regardless of age, will not be affected by extraneous data (i.e., tags) that does not contain a MPEG sync sequence. <span class="anchor" id="line-134"></span></li><li>There is minimal impact if a decoder does not recognize ID3v2 tags but encounters something with a sync sequence. At worst a click or pop will be heard at the beginning of the piece, as if some data corruption has occurred. <span class="anchor" id="line-135"></span></li><li>New software is expected to take advantage of ID3v2. Unsynchronization is not necessary with ID3v2 compliant software. <span class="anchor" id="line-136"></span></li></ol><p class="line874">(Software which does not behave according to items 1 and 2 above are categorically deemed "broken." Microsoft's Media Player is an example of such software.) <span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span></p><p class="line867"><strong>Martin</strong>: I believe that unsynchronization should be done as seldom as possible since it increases the size of the tag as well as the parsing time. In other words, I think unsynchronization should be turned off as default. <span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span></p><p class="line874">However, it is important to be able to undo unsynchronization when reading tags; otherwise unsynchronized tags will not be read correctly. <span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span></p><p class="line867">
</p><h2 id="Pitfalls_.26_General_Advice">Pitfalls &amp; General Advice</h2>
<span class="anchor" id="line-143"></span><p class="line867">
</p><h3 id="RTFM_.28details_are_important.21.29">RTFM (details are important!)</h3>
<span class="anchor" id="line-144"></span><p class="line862">When the ID3v2 document refers to another standard it is assumed that the implementor is familiar with that standard as well. When it says URL it does not mean 'www.buymusic.com', it means '<a class="http" href="http://www.buymusic.com/">http://www.buymusic.com/</a>' A "URL containing an e-mail address" must include the '<a class="mailto" href="mailto:&#39;">mailto:'</a> qualifier. Those who at least take a quick look at the related standards will not make these kinds of mistakes. <span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span></p><p class="line862">If these details are so important, why aren't they spelled out in the ID3v2 standard? According to Martin, "There has been people who said to me, 'You must write these kind of things in the document, or else people will make these mistakes.' The latest ID3 v2.01 draft is <em>only </em>74,657 bytes of pure text because I did not. Guess why there are references to the standards in the document!" <span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span></p><p class="line867">
</p><h3 id="Compression_before_encryption">Compression before encryption</h3>
<span class="anchor" id="line-149"></span><p class="line874">Encryption works by scrambling data to produce what amounts to random bits for an attacker. Data compression works by replacing or removing redundant information. It follows that the output of any decent crypto algorithm will not be compressible; therefore if you wish to use both compression and encryption, you must compress the data before encrypting it. <span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span></p><p class="line874">Compressing before encryption also affords better security, since predictable headers and such will be hidden by compression. <span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span></p><p class="line862">Remember: <em>compression </em>comes before <em>encryption </em>in the dictionary (at least in English) and that is how it should be in your application. <span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span></p><p class="line867">
</p><h3 id="Validating_user_input">Validating user input</h3>
<span class="anchor" id="line-156"></span><p class="line874">Never trust the input from the user to be sensible or formatted correctly. Is the ISRC a valid one? Does the month 13 exist? Could this piece of music be from disc 5 out of a 3 disc set? <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span></p><p class="line867"><strong>Dirk</strong>: Personally, I think having input validation occur when the user signifies that the tag is "finished" is a good way of going about it, if only because I know I'll get half way through something and want to stop and do something else before I forget. <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span></p><p class="line867"><strong>James</strong>: Extremely strict validation becomes restrictions on versatility and usability. An option to turn off or accept potentially invalid data can be included somewhere. For example, by default Microsoft Visual Basic checks for syntax errors as code is entered; however, users can disable that feature if they wish to delay syntax checking until compile time. <span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span></p><p class="line874">Things to watch out for (this is by no means an all-inclusive list): <span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span></p><ul><li>Properly formatted URLs (see RTFM, above.) But should your application verify whether the URL actually exists? That may be too complicated; Martin and James's opinion is no verification. <span class="anchor" id="line-165"></span></li><li>Proper MIME types. <span class="anchor" id="line-166"></span></li><li>Are characters valid? Most text fields forbid control characters, even newlines. NULs are not allowed except in Unicode strings or to indicate end-of-string for terminated strings. <span class="anchor" id="line-167"></span></li><li>Numerical strings must consist solely of the characters '0' through '9' <span class="anchor" id="line-168"></span></li><li>Are lists handled properly? The list separator is a slash: / What happens if the user enters a / in an item? <span class="anchor" id="line-169"></span></li><li>Are characters such as ( escaped where necessary? <span class="anchor" id="line-170"></span></li><li>Do dates and times make sense? Years must be four digits long and be in the right century. (No Y2K problems here!) <span class="anchor" id="line-171"></span></li><li>Is an image really the format the user claims it is? Some people believe renaming a .BMP file to .PNG will change its format accordingly. <span class="anchor" id="line-172"></span></li></ul><p class="line874">Your application should never crash because the user does something stupid. Likewise, your application should not crash because of erroneous or malformed data in a tag. It is particularly important your application can recognize Unicode text frames and ignore them if the operating system or your program cannot handle Unicode. <span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span></p><p class="line867">
</p><h2 id="Credits_.26_Contributors">Credits &amp; Contributors</h2>
<span class="anchor" id="line-175"></span><ul><li>Dirk Mahoney, creator of the ID3Lib C++ tag processing library. <span class="anchor" id="line-176"></span></li><li>James Lin, author of these Guidelines. <span class="anchor" id="line-177"></span></li><li>Martin Nilsson, author of the ID3v2 standard. <span class="anchor" id="line-178"></span></li></ul><p class="line867">
</p><h2 id="References">References</h2>
<span class="anchor" id="line-179"></span><ul><li><p class="line891"><a class="nonexistent" href="http://id3.org/id3guide/">www.id3.org</a>: Home of the <a href="http://id3.org/Developer%20Information">ID3v2 Informal Standard</a> and lots of other useful material. <span class="anchor" id="line-180"></span></p></li></ul><p class="line867">
</p><h2 id="Copyright_.26_Legal_Notice">Copyright &amp; Legal Notice</h2>
<span class="anchor" id="line-181"></span><p class="line874">Copyright © 1998 James Lin and Merlin's Workshop. <span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span></p><p class="line874">The goal of this document is to provide hints on how to implement the ID3v2 standard(s) correctly and efficiently. Distribution of this document is unlimited as long as no changes are made to its content: <span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span></p><p class="line874">This document and translations of it may be copied and furnished to others, in any format or medium, provided no modifications are made to the content unless written permission has been obtained from the author. <span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span></p><p class="line874">This document is provided "AS IS" without warranty of any kind, either expressed or implied, including but not limited to, the implied warranties of merchantability and fitness for a particular purpose. <span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span></p><p class="line874">In no event unless required by applicable law will the author of this document be liable for damages, including any general, special, incidental or consequential damages arising out of the use or inability to use any information (including but not limited to loss or corruption of data or losses sustained by third parties), even if the author has been advised of the possibility of such damages. <span class="anchor" id="line-190"></span><span class="anchor" id="bottom"></span></p></div><p id="pageinfo" class="info" lang="en" dir="ltr">id3guide  (last edited 2013-11-24 23:12:11 by <span title="DanONeill @ localhost[127.0.0.1]"><a href="http://id3.org/DanONeill" title="DanONeill @ localhost[127.0.0.1]">DanONeill</a></span>)</p>

<div id="pagebottom"></div>
</div>

<center><a href="http://id3.org/Copyright">Copyright</a> © 1998-2014 by their respective owners</center>
<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>



</body></html>